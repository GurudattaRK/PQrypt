package com.pqrypt.app

import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import com.pqrypt.app.databinding.ActivityHelpBinding

class HelpActivity : AppCompatActivity() {

    private lateinit var binding: ActivityHelpBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityHelpBinding.inflate(layoutInflater)
        setContentView(binding.root)

        binding.btnBack.setOnClickListener { finish() }

        val screen = intent.getStringExtra("screen") ?: "main"
        val (title, content) = helpContentFor(screen)
        binding.tvTitle.text = title
        binding.tvContent.text = content
    }

    private fun helpContentFor(screen: String): Pair<String, String> {
        return when (screen) {
            "main" -> Pair(
                "Main Screen Guide",
                "Welcome to PQrypt! Here are your main options:\n\n" +
                "üü£ SECURE SHARE (Purple Button)\n" +
                "‚Ä¢ What it does: Share files and text messages securely between devices\n" +
                "‚Ä¢ When to use: When you want to send encrypted files or messages to another person\n" +
                "‚Ä¢ Security: Uses post-quantum cryptography that's resistant to future quantum computers\n\n" +
                "üî¥ FILE ENCRYPTION (Red Button)\n" +
                "‚Ä¢ What it does: Encrypt individual files on your device\n" +
                "‚Ä¢ When to use: When you want to protect files stored on your phone\n" +
                "‚Ä¢ Security: Files are encrypted and can only be opened with the correct password\n\n" +
                "üü¢ PQC KEY EXCHANGE (Green Button)\n" +
                "‚Ä¢ What it does: Exchange cryptographic keys with another person\n" +
                "‚Ä¢ When to use: When you need to establish secure communication keys\n" +
                "‚Ä¢ Security: Uses quantum-resistant key exchange algorithms\n\n" +
                "üîµ PASSWORD GENERATOR (Blue Button)\n" +
                "‚Ä¢ What it does: Generate strong, random passwords\n" +
                "‚Ä¢ When to use: When you need secure passwords for accounts or encryption\n" +
                "‚Ä¢ Security: Creates cryptographically secure random passwords\n\n" +
                "üü† HELP BUTTON (Orange \"Help?\" Button)\n" +
                "‚Ä¢ What it does: Opens help documentation for the app\n" +
                "‚Ä¢ When to use: When you need guidance on using any feature\n\n" +
                "üí° TIP: All features use post-quantum cryptography for future-proof security against quantum computers!"
            )
            "file_encryption" -> Pair(
                "File Encryption Guide",
                "Protect files on your device with strong encryption:\n\n" +
                "üìÅ ENCRYPT TAB:\n" +
                "‚Ä¢ Choose File Button: Select file to encrypt\n" +
                "‚Ä¢ Password Field: Enter encryption password\n" +
                "‚Ä¢ Encrypt Button: Start encryption process\n" +
                "‚Ä¢ Progress Bar: Shows encryption progress\n\n" +
                "üîì DECRYPT TAB:\n" +
                "‚Ä¢ Choose File Button: Select encrypted file (.pqrypt2)\n" +
                "‚Ä¢ Password Field: Enter decryption password\n" +
                "‚Ä¢ Decrypt Button: Start decryption process\n" +
                "‚Ä¢ Progress Bar: Shows decryption progress\n\n" +
                "üìã SCREEN ELEMENTS:\n" +
                "‚Ä¢ File Display: Shows selected file name and size\n" +
                "‚Ä¢ Status Messages: Shows success/error messages\n" +
                "‚Ä¢ Output Location: Files are saved in Documents/PQrypt/\n\n" +
                "üîí SECURITY TIPS:\n" +
                "‚Ä¢ Use strong passwords and remember them - lost passwords mean lost files\n" +
                "‚Ä¢ Encrypted files have .pqrypt2 extension\n" +
                "‚Ä¢ Original files are kept safe during encryption\n" +
                "‚Ä¢ Uses post-quantum cryptography for maximum security\n\n" +
                "üìç QUICK START:\n" +
                "1. Tap \"Choose File\" and select your file\n" +
                "2. Enter a strong password\n" +
                "3. Tap \"Encrypt\"\n" +
                "4. Find encrypted file in Documents/PQrypt/"
            )
            "password_vault" -> Pair(
                "Password Generator Guide",
                "Generate secure passwords for various uses:\n\n" +
                "üìù INPUT FIELDS:\n" +
                "‚Ä¢ App/Website Name: Enter the service name (e.g., \"Gmail\", \"Facebook\")\n" +
                "‚Ä¢ App Password: Optional additional password for extra security\n" +
                "‚Ä¢ Master Password: Your main password that generates all others\n\n" +
                "üéØ GENERATE BUTTON:\n" +
                "‚Ä¢ Creates a deterministic password\n" +
                "‚Ä¢ Same inputs always produce the same password\n" +
                "‚Ä¢ Cryptographically secure random generation\n\n" +
                "‚öôÔ∏è SETTINGS BUTTON:\n" +
                "‚Ä¢ Choose password length (8-128 characters)\n" +
                "‚Ä¢ Select special character sets to include\n" +
                "‚Ä¢ Lowercase, Uppercase and Numbers are always included\n\n" +
                "üìã PASSWORD DISPLAY:\n" +
                "‚Ä¢ Shows generated password\n" +
                "‚Ä¢ Copy button to copy to clipboard\n" +
                "‚Ä¢ Strength indicator shows password security level\n\n" +
                "üîí SECURITY FEATURES:\n" +
                "‚Ä¢ Deterministic: Same inputs = same password\n" +
                "‚Ä¢ No storage: Passwords generated on-demand\n" +
                "‚Ä¢ Quantum-resistant algorithms\n" +
                "‚Ä¢ Compatible with desktop version\n\n" +
                "üí° USAGE TIP:\n" +
                "Use the same Master Password across all your devices to get consistent passwords for each service!"
            )
            "password_settings" -> Pair(
                "Password Settings Guide",
                "Customize your password generation preferences:\n\n" +
                "üìè LENGTH SLIDER:\n" +
                "‚Ä¢ Range: 8 to 128 characters\n" +
                "‚Ä¢ Longer passwords = stronger security\n" +
                "‚Ä¢ Recommended: 16+ characters for most uses\n\n" +
                "üî£ CHARACTER SETS:\n" +
                "‚Ä¢ Special Set 1: ~!@#$%^&*()\n" +
                "‚Ä¢ Special Set 2: /.,';][=-\n" +
                "‚Ä¢ Special Set 3: ><\":}{+_\n\n" +
                "‚úÖ ALWAYS INCLUDED:\n" +
                "‚Ä¢ Lowercase letters (a-z)\n" +
                "‚Ä¢ Uppercase letters (A-Z)\n" +
                "‚Ä¢ Numbers (0-9)\n\n" +
                "‚öôÔ∏è HOW TO USE:\n" +
                "1. Adjust length slider to desired password length\n" +
                "2. Check/uncheck special character sets as needed\n" +
                "3. Settings are automatically saved\n" +
                "4. Return to main screen to generate passwords\n\n" +
                "üí° RECOMMENDATIONS:\n" +
                "‚Ä¢ For most websites: 16-20 characters with Set 1\n" +
                "‚Ä¢ For high-security: 32+ characters with all sets\n" +
                "‚Ä¢ For compatibility: Avoid Set 2 & 3 if site has restrictions\n\n" +
                "üîí NOTE: These settings affect all future password generation and work across all your devices when using the same inputs."
            )
            "pqc_mode" -> Pair(
                "PQC Key Exchange Mode Guide",
                "Choose how to exchange quantum-resistant keys:\n\n" +
                "üì° MANUAL EXCHANGE:\n" +
                "‚Ä¢ What it does: Step-by-step key exchange you control\n" +
                "‚Ä¢ When to use: When you can't use Bluetooth or want more control\n" +
                "‚Ä¢ How it works: Generate keys, exchange them manually (email/USB/etc.)\n" +
                "‚Ä¢ Creates files: Generates .key files that you share manually\n\n" +
                "üì∂ BLUETOOTH EXCHANGE:\n" +
                "‚Ä¢ What it does: Automatic key exchange via Bluetooth\n" +
                "‚Ä¢ When to use: When both people are nearby (within Bluetooth range)\n" +
                "‚Ä¢ How it works: Devices connect via Bluetooth, keys exchanged automatically\n" +
                "‚Ä¢ No files: Everything happens automatically - no .key files created\n\n" +
                "üë• ROLES:\n" +
                "‚Ä¢ Sender: Initiates the key exchange process\n" +
                "‚Ä¢ Receiver: Responds to and completes the exchange\n\n" +
                "üîí SECURITY:\n" +
                "‚Ä¢ Uses post-quantum cryptography\n" +
                "‚Ä¢ Resistant to future quantum computer attacks\n" +
                "‚Ä¢ Perfect forward secrecy\n" +
                "‚Ä¢ No intermediate key storage in Bluetooth mode\n\n" +
                "üí° NEXT STEPS:\n" +
                "‚Ä¢ Choose Manual for remote key exchange\n" +
                "‚Ä¢ Choose Bluetooth for local, automatic exchange\n" +
                "‚Ä¢ Both methods provide the same security level"
            )
            "pqc_process" -> Pair(
                "PQC Manual Exchange Process",
                "Step-by-step guide for manual key exchange:\n\n" +
                "üë§ SENDER PROCESS:\n" +
                "1Ô∏è‚É£ Generate 1.key\n" +
                "   ‚Ä¢ Creates initial key file to send to receiver\n" +
                "   ‚Ä¢ Share this file with receiver via secure channel\n\n" +
                "2Ô∏è‚É£ Process 2.key & Generate 3.key\n" +
                "   ‚Ä¢ Open 2.key file received from receiver\n" +
                "   ‚Ä¢ App automatically generates 3.key\n" +
                "   ‚Ä¢ Send 3.key to receiver\n\n" +
                "3Ô∏è‚É£ Final Key Generated\n" +
                "   ‚Ä¢ App creates final.key for encryption/decryption\n" +
                "   ‚Ä¢ Key exchange complete!\n\n" +
                "üë§ RECEIVER PROCESS:\n" +
                "1Ô∏è‚É£ Process 1.key & Generate 2.key\n" +
                "   ‚Ä¢ Open 1.key file received from sender\n" +
                "   ‚Ä¢ App automatically generates 2.key\n" +
                "   ‚Ä¢ Send 2.key back to sender\n\n" +
                "2Ô∏è‚É£ Process 3.key\n" +
                "   ‚Ä¢ Open 3.key file received from sender\n" +
                "   ‚Ä¢ App automatically generates final.key\n" +
                "   ‚Ä¢ Key exchange complete!\n\n" +
                "üìÅ FILE LOCATIONS:\n" +
                "‚Ä¢ All key files saved in Documents/PQrypt/\n" +
                "‚Ä¢ Use \"Open Output Folder\" to find files\n\n" +
                "üîí SECURITY TIPS:\n" +
                "‚Ä¢ Use secure channels (encrypted email, secure messaging) to exchange .key files\n" +
                "‚Ä¢ Verify file integrity before processing\n" +
                "‚Ä¢ Clean up intermediate files after successful exchange"
            )
            "bluetooth" -> Pair(
                "Bluetooth Key Exchange Guide",
                "Automatic key exchange via Bluetooth connection:\n\n" +
                "üì° SENDER SETUP:\n" +
                "‚Ä¢ Select \"Sender\" role\n" +
                "‚Ä¢ Tap \"Make Discoverable\" to allow connections\n" +
                "‚Ä¢ Wait for receiver to connect\n" +
                "‚Ä¢ Device name will appear in connection list\n\n" +
                "üì± RECEIVER SETUP:\n" +
                "‚Ä¢ Select \"Receiver\" role\n" +
                "‚Ä¢ Tap \"Scan for Devices\" to find nearby devices\n" +
                "‚Ä¢ Select sender's device from the list\n" +
                "‚Ä¢ Connection will be established automatically\n\n" +
                "üîÑ AUTOMATIC PROCESS:\n" +
                "‚Ä¢ 1.key ‚Üí 2.key ‚Üí 3.key ‚Üí final.key\n" +
                "‚Ä¢ All steps happen automatically over Bluetooth\n" +
                "‚Ä¢ Progress shown on both devices\n" +
                "‚Ä¢ No manual file sharing required\n\n" +
                "üìä STATUS DISPLAY:\n" +
                "‚Ä¢ Connection status and progress\n" +
                "‚Ä¢ Current exchange step\n" +
                "‚Ä¢ Success/error messages\n\n" +
                "üîí SECURITY FEATURES:\n" +
                "‚Ä¢ Encrypted Bluetooth communication\n" +
                "‚Ä¢ Device verification before exchange\n" +
                "‚Ä¢ No intermediate files stored\n" +
                "‚Ä¢ Post-quantum cryptography\n\n" +
                "‚ö†Ô∏è TROUBLESHOOTING:\n" +
                "‚Ä¢ Ensure Bluetooth is enabled on both devices\n" +
                "‚Ä¢ Stay within Bluetooth range (typically 10 meters)\n" +
                "‚Ä¢ Verify device names before connecting\n" +
                "‚Ä¢ Grant all Bluetooth permissions when prompted"
            )
            else -> Pair(
                "Help",
                "Welcome to PQrypt Help!\n\n" +
                "This app provides quantum-resistant cryptography for:\n" +
                "‚Ä¢ Secure file and text sharing\n" +
                "‚Ä¢ File encryption and decryption\n" +
                "‚Ä¢ Key exchange protocols\n" +
                "‚Ä¢ Password generation\n\n" +
                "Use the Help button on any screen for specific guidance about that feature.\n\n" +
                "All features use post-quantum cryptography to protect against future quantum computer attacks."
            )
        }
    }
}
